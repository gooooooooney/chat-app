# Phase 2 å®ç°è¯´æ˜

## ğŸ‰ å®ç°å®Œæˆæ€»ç»“

Phase 2 çš„ UI ç»„ä»¶å·²æˆåŠŸå®ç°ï¼ŒåŒ…å«å®Œæ•´çš„èŠå¤©ç•Œé¢ç»„ä»¶ä½“ç³»ã€‚

### âœ… å·²å®ç°çš„ç»„ä»¶

#### 1. æ ¸å¿ƒèŠå¤©ç»„ä»¶
- **ChatScreen** (`/components/chat/ChatScreen.tsx`) - èŠå¤©é¡µé¢ä¸»å®¹å™¨
- **ChatHeader** (`/components/chat/ChatHeader.tsx`) - èŠå¤©é¡µé¢å¤´éƒ¨
- **ChatMessageList** (`/components/chat/ChatMessageList.tsx`) - æ¶ˆæ¯åˆ—è¡¨
- **MessageBubble** (`/components/chat/MessageBubble.tsx`) - æ¶ˆæ¯æ°”æ³¡
- **MessageInput** (`/components/chat/MessageInput.tsx`) - æ¶ˆæ¯è¾“å…¥æ¡†

#### 2. è¾…åŠ©ç»„ä»¶
- **LoadingScreen** (`/components/chat/LoadingScreen.tsx`) - åŠ è½½çŠ¶æ€
- **ErrorScreen** (`/components/chat/ErrorScreen.tsx`) - é”™è¯¯çŠ¶æ€

#### 3. Hooks å’Œå·¥å…·
- **useChat** (`/hooks/useChat.ts`) - èŠå¤©åŠŸèƒ½ç®¡ç† Hook
- **navigation.ts** (`/utils/navigation.ts`) - å¯¼èˆªå·¥å…·å‡½æ•°

#### 4. è·¯ç”±é…ç½®
- **chat/[conversationId].tsx** - åŠ¨æ€èŠå¤©é¡µé¢è·¯ç”±

### ğŸ”§ æŠ€æœ¯ç‰¹æ€§

#### 1. è®¾è®¡ç³»ç»Ÿé›†æˆ
- å®Œå…¨åŸºäºç°æœ‰ UI ç»„ä»¶åº“æ„å»º
- æ”¯æŒç°æœ‰çš„ TailwindCSS æ ·å¼ç³»ç»Ÿ
- ä½¿ç”¨ `class-variance-authority` è¿›è¡Œç»„ä»¶å˜ä½“ç®¡ç†

#### 2. æ€§èƒ½ä¼˜åŒ–
- **MessageBubble** ä½¿ç”¨ `React.memo` ä¼˜åŒ–æ¸²æŸ“
- æ¶ˆæ¯åˆ—è¡¨æ”¯æŒè™šæ‹ŸåŒ–å’Œæ— é™æ»šåŠ¨
- é”®ç›˜é€‚é…å’ŒåŠ¨ç”»ä¼˜åŒ–

#### 3. ç”¨æˆ·ä½“éªŒ
- æ”¯æŒæ¶ˆæ¯çŠ¶æ€æ˜¾ç¤º (å‘é€ä¸­ã€å·²å‘é€ã€å·²è¯»ç­‰)
- æ™ºèƒ½å¤´åƒæ˜¾ç¤ºé€»è¾‘
- è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
- é”®ç›˜é¿è®©å¤„ç†

#### 4. å¯è®¿é—®æ€§
- å®Œæ•´çš„å±å¹•é˜…è¯»å™¨æ”¯æŒ
- è¯­ä¹‰åŒ–çš„ HTML ç»“æ„
- åˆé€‚çš„ aria æ ‡ç­¾

### ğŸ“± ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹

#### 1. åŸºæœ¬èŠå¤©é¡µé¢
```typescript
import ChatScreen from '@/components/chat/ChatScreen';

// è‡ªåŠ¨å¤„ç†è·¯ç”±å‚æ•°å’ŒçŠ¶æ€ç®¡ç†
export default function ChatPage() {
  return <ChatScreen />;
}
```

#### 2. å¯¼èˆªåˆ°èŠå¤©é¡µé¢
```typescript
import { navigateToChat } from '@/utils/navigation';

// ä»è”ç³»äººåˆ—è¡¨æˆ–å…¶ä»–é¡µé¢è·³è½¬
const handleStartChat = (conversationId: string) => {
  navigateToChat(conversationId);
};
```

#### 3. ä½¿ç”¨èŠå¤© Hook
```typescript
import { useChat } from '@/hooks/useChat';

function MyCustomChatComponent() {
  const {
    conversation,
    messages,
    sendMessage,
    loading,
    error
  } = useChat({
    conversationId: "conversation_id",
    userId: "user_id"
  });

  // è‡ªå®šä¹‰èŠå¤©é€»è¾‘
}
```

### ğŸ”Œ é›†æˆçŠ¶æ€

#### 1. ä¸ Phase 1 åç«¯ API é›†æˆ
- âœ… ä½¿ç”¨ `api.v1.*` è¿›è¡Œæ•°æ®æŸ¥è¯¢å’Œæ“ä½œ
- âœ… å®æ—¶æ¶ˆæ¯è®¢é˜…æ”¯æŒ
- âœ… é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†

#### 2. ä¸ç°æœ‰ç»„ä»¶é›†æˆ
- âœ… æ›´æ–°äº† `ChatListScreen` æ”¯æŒå¯¼èˆªåˆ°èŠå¤©é¡µé¢
- âœ… å¤ç”¨äº†ç°æœ‰çš„ UI ç»„ä»¶ (Button, Text, Avatar ç­‰)
- âœ… ä¿æŒäº†è®¾è®¡ç³»ç»Ÿçš„ä¸€è‡´æ€§

### ğŸš§ å¾…ä¼˜åŒ–é¡¹ç›®

#### 1. é”®ç›˜å¤„ç†å¢å¼º
éœ€è¦å®‰è£…å¹¶é…ç½® `react-native-keyboard-controller`:
```bash
pnpm add react-native-keyboard-controller
```

#### 2. é«˜æ€§èƒ½åˆ—è¡¨
å½“å‰ä½¿ç”¨ `FlatList`ï¼Œå¯ä»¥è€ƒè™‘å‡çº§åˆ° `@legendapp/list` ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚

#### 3. è®¤è¯é›†æˆ
éœ€è¦å°† `getCurrentUserId()` æ›¿æ¢ä¸ºå®é™…çš„è®¤è¯ç³»ç»Ÿé›†æˆã€‚

### ğŸ“‹ ä¸‹ä¸€æ­¥è®¡åˆ’

#### Phase 3 å»ºè®®
1. **å®æ—¶åŠŸèƒ½å¢å¼º** - WebSocket è¿æ¥å’Œå®æ—¶çŠ¶æ€
2. **åª’ä½“æ¶ˆæ¯æ”¯æŒ** - å›¾ç‰‡ã€æ–‡ä»¶ã€è¯­éŸ³æ¶ˆæ¯
3. **èŠå¤©åŠŸèƒ½æ‰©å±•** - æ¶ˆæ¯æœç´¢ã€è½¬å‘ã€åˆ é™¤
4. **æ¨é€é€šçŸ¥** - åå°æ¶ˆæ¯é€šçŸ¥
5. **ç¦»çº¿æ”¯æŒ** - æ¶ˆæ¯ç¼“å­˜å’Œç¦»çº¿åŒæ­¥

#### ç«‹å³å¯ç”¨åŠŸèƒ½
- âœ… æ–‡æœ¬æ¶ˆæ¯å‘é€å’Œæ¥æ”¶
- âœ… å®æ—¶æ¶ˆæ¯æ›´æ–°
- âœ… æ¶ˆæ¯çŠ¶æ€è·Ÿè¸ª
- âœ… èŠå¤©åˆ—è¡¨å’Œè¯¦æƒ…é¡µå¯¼èˆª
- âœ… å“åº”å¼ç•Œé¢è®¾è®¡

### ğŸ¯ æµ‹è¯•å»ºè®®

1. **åŠŸèƒ½æµ‹è¯•**
   - ä»èŠå¤©åˆ—è¡¨ç‚¹å‡»è¿›å…¥èŠå¤©é¡µé¢
   - å‘é€æ–‡æœ¬æ¶ˆæ¯
   - æŸ¥çœ‹æ¶ˆæ¯çŠ¶æ€å˜åŒ–
   - æµ‹è¯•é”®ç›˜å¼¹å‡ºå’Œæ”¶èµ·

2. **æ€§èƒ½æµ‹è¯•**
   - åŠ è½½å¤§é‡å†å²æ¶ˆæ¯
   - å¿«é€Ÿå‘é€å¤šæ¡æ¶ˆæ¯
   - æµ‹è¯•å†…å­˜å ç”¨

3. **ç”¨æˆ·ä½“éªŒæµ‹è¯•**
   - ä¸åŒå±å¹•å°ºå¯¸é€‚é…
   - æš—è‰²æ¨¡å¼æ”¯æŒ
   - æ— éšœç¢åŠŸèƒ½æµ‹è¯•

---

## æ€»ç»“

Phase 2 æˆåŠŸå»ºç«‹äº†å®Œæ•´ä¸”ç°ä»£åŒ–çš„èŠå¤© UI ç»„ä»¶ä½“ç³»ã€‚æ‰€æœ‰ç»„ä»¶éƒ½éµå¾ªé¡¹ç›®çš„è®¾è®¡è§„èŒƒï¼Œä¸ç°æœ‰æ¶æ„æ— ç¼é›†æˆï¼Œä¸ºåç»­çš„åŠŸèƒ½æ‰©å±•å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚

ä¸‹ä¸€é˜¶æ®µå¯ä»¥ç›´æ¥å¼€å§‹ Phase 3 çš„æ ¸å¿ƒèŠå¤©åŠŸèƒ½å®ç°ï¼Œæˆ–æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´å¼€å‘ä¼˜å…ˆçº§ã€‚